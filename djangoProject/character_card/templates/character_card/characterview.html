<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Character Details</title>
</head>
<body>
    <div class="container">
        <h2>Character Details</h2>


        <div>
            <strong>Name:</strong> {{ character.name }}
        </div>
        <div>
            <strong>Race:</strong> {{ character.race.name }}
        </div>
        <div>
            <strong>Class:</strong> {{ character.character_class.name }}
        </div>
        <div>
            <strong>Level:</strong> {{ character.level }}
        </div>
       <div>
    <label>Strength:</label>
    <span id="strength_value">{{ character.strength }}</span>
    <button onclick="rollDice('strength')">Roll Dice</button>
    <span id="strength_result"></span>
</div>


<div>
    <label>Dexterity:</label>
    <span id="dexterity_value">{{ character.dexterity }}</span>
    <button onclick="rollDice('dexterity')">Roll Dice</button>
    <span id="dexterity_result"></span>
</div>


<div>
    <label>Constitution:</label>
    <span id="constitution_value">{{ character.constitution }}</span>
    <button onclick="rollDice('constitution')">Roll Dice</button>
    <span id="constitution_result"></span>
</div>


<div>
    <label>Intelligence:</label>
    <span id="intelligence_value">{{ character.intelligence }}</span>
    <button onclick="rollDice('intelligence')">Roll Dice</button>
    <span id="intelligence_result"></span>
</div>


<div>
    <label>Wisdom:</label>
    <span id="wisdom_value">{{ character.wisdom }}</span>
    <button onclick="rollDice('wisdom')">Roll Dice</button>
    <span id="wisdom_result"></span>
</div>


<div>
    <label>Charisma:</label>
    <span id="charisma_value">{{ character.charisma }}</span>
    <button onclick="rollDice('charisma')">Roll Dice</button>
    <span id="charisma_result"></span>
</div>
       <div>
    <label>Strength ST:</label>
    <span id="StrST_value">{{ character.StrST }}</span>
    <button onclick="rollDice('StrST')">Roll Dice</button>
    <span id="StrST_result"></span>
</div>


<div>
    <label>Dexterity ST:</label>
    <span id="DexST_value">{{ character.DexST }}</span>
    <button onclick="rollDice('DexST')">Roll Dice</button>
    <span id="DexST_result"></span>
</div>


<div>
    <label>Constitution ST:</label>
    <span id="ConST_value">{{ character.ConST }}</span>
    <button onclick="rollDice('ConST')">Roll Dice</button>
    <span id="ConST_result"></span>
</div>


<div>
    <label>Intelligence ST:</label>
    <span id="IntST_value">{{ character.IntST }}</span>
    <button onclick="rollDice('IntST')">Roll Dice</button>
    <span id="IntST_result"></span>
</div>


<div>
    <label>Wisdom ST:</label>
    <span id="WisST_value">{{ character.WisST }}</span>
    <button onclick="rollDice('WisST')">Roll Dice</button>
    <span id="WisST_result"></span>
</div>


<div>
    <label>Charisma ST:</label>
    <span id="ChaST_value">{{ character.ChaST }}</span>
    <button onclick="rollDice('ChaST')">Roll Dice</button>
    <span id="ChaST_result"></span>
</div>
        <div>
            <strong>Maximum Hit Dice:</strong> {{ character.Mhitdice }}
        </div>
        <div>
            <strong>Current Hit Dice:</strong> {{ character.Chitdice }}
        </div>
        <div>
            <strong>Death Saves Pass:</strong> {{ character.Dsp }}
        </div>
        <div>
            <strong>Death Saves Fail:</strong> {{ character.Dsf }}
        </div>
        <div>
            <strong>Skills:</strong>
            <ul>
                {% for skill in character.skills.all %}
                    <li>{{ skill.name }} - {{ skill.description }}</li>
                {% endfor %}
            </ul>
        </div>
        <div>
            <strong>Spells:</strong>
            <ul>
                {% for spell in character.character_class.spells.all %}
                    {% if spell.learned %}
                    <li>{{ spell.name }} - {{ spell.description }}</li>
                    {% endif %}
                {% endfor %}
            </ul>
        </div>
        <div>
            <strong>Inventory Items:</strong>
            <ul>
                {% for item in character.inventory_items.all %}
                    <li>{{ item.name }} - {{ item.description }}</li>
                {% endfor %}
            </ul>
        </div>
   <a href="{% url 'character_card:character_edit' pk=character.id %}" class="btn btn-primary">Edit Character</a>
    </div>
<div>
    <a href="{% url 'character_card:list_characters' %}">
        <button type="button">Back to Character List</button>
    </a>
</div>

<script>
    function rollDice(stat) {
        var roll = Math.floor(Math.random() * 20) + 1;
        var statValue = document.getElementById(stat + '_value').innerText;
        var resultText = "Rolled: " + roll + ". ";

        if (roll >= parseInt(statValue)) {
            resultText += "Success!";
        } else {
            resultText += "Failed.";
        }

        document.getElementById(stat + '_result').innerText = resultText;
    }
</script>
</body>
</html>
